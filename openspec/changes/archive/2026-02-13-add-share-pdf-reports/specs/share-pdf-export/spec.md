## ADDED Requirements

### Requirement: PDF cap table report
The `shares pdf table` subcommand SHALL generate a PDF document showing the current cap table. The PDF SHALL include a title ("Cap Table"), generation date, and a table with columns: holder name, share class, shares held, percentage, and vesting status.

#### Scenario: Generate cap table PDF
- **WHEN** a user runs `shares pdf table --output cap-table.pdf`
- **THEN** a valid PDF file is created at `cap-table.pdf` containing the current cap table with all holders and their positions

#### Scenario: Cap table PDF includes metadata
- **WHEN** the cap table PDF is generated
- **THEN** the document header shows "Formabi â€” Cap Table" and the generation date

### Requirement: PDF history report
The `shares pdf history` subcommand SHALL generate a PDF document showing all share events in chronological order. The PDF SHALL include a title, generation date, and a table with columns: date, event type, holder, share class, and quantity.

#### Scenario: Generate history PDF
- **WHEN** a user runs `shares pdf history --output share-history.pdf`
- **THEN** a valid PDF file is created containing all events from `events.ledger` in date order

#### Scenario: History PDF includes all events
- **WHEN** multiple share events exist (grants, transfers)
- **THEN** the history PDF lists every event with its details

### Requirement: PDF holder statement
The `shares pdf holder <id>` subcommand SHALL generate a PDF document showing an individual holder's share position and event history. The PDF SHALL include the holder's name, current holdings summary, and a filtered event history.

#### Scenario: Generate holder statement
- **WHEN** a user runs `shares pdf holder richard --output richard-statement.pdf`
- **THEN** a valid PDF file is created showing Richard Targett's current holdings and all events involving richard

#### Scenario: Holder statement includes summary and history
- **WHEN** a holder has multiple share events
- **THEN** the statement shows a summary section (total shares, percentage, vesting) followed by a chronological event list

#### Scenario: Unknown holder produces error
- **WHEN** a user runs `shares pdf holder unknown-id`
- **THEN** the command exits with code 1 and reports "unknown holder: unknown-id"

### Requirement: PDF output modes
All `shares pdf` subcommands SHALL write PDF to stdout by default. When `--output <path>` is provided, the PDF SHALL be written to the specified file path and the path printed to stderr.

#### Scenario: Default stdout output
- **WHEN** a user runs `shares pdf table > report.pdf`
- **THEN** the PDF content is written to stdout and captured in report.pdf

#### Scenario: Named file output
- **WHEN** a user runs `shares pdf table --output report.pdf`
- **THEN** the PDF is written to `report.pdf` and stderr shows the output path

### Requirement: PDF generation pipeline
PDF reports SHALL be generated by producing markdown content and converting it to PDF using `pandoc --pdf-engine=typst`. The shares module SHALL include `pandoc` and `typst` as nix packages.

#### Scenario: Pandoc and typst are available
- **WHEN** the shares module is loaded in the devShell
- **THEN** `pandoc` and `typst` commands are available on the PATH

#### Scenario: PDF pipeline produces valid output
- **WHEN** any `shares pdf` subcommand runs
- **THEN** the output is a valid PDF file that can be opened in standard PDF viewers
